<!DOCTYPE html>
<html>
<head>
    <%- include('partials/head') %>
    <title>Domino's Style Pizza</title>
</head>
<body>
    <%- include('partials/navbar') %>

    <div id="promoCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <% banners.forEach((b, i) => { %>
                <button type="button" data-bs-target="#promoCarousel" data-bs-slide-to="<%= i %>" class="<%= i===0?'active':'' %>"></button>
            <% }) %>
        </div>
        <div class="carousel-inner">
            <% banners.forEach((b, index) => { %>
                <div class="carousel-item <%= index===0?'active':'' %>">
                    <img src="<%= b.image_url %>" class="d-block w-100" style="height: 450px; object-fit: cover;">
                </div>
            <% }) %>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#promoCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#promoCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>

    <div class="container my-5">
        
        <div class="text-center mb-4">
            <h2 class="section-title">üçï ‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
            <p class="text-muted">‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏Æ‡∏¥‡∏ï ‡πÅ‡∏õ‡πâ‡∏á‡∏´‡∏ô‡∏≤‡∏ô‡∏∏‡πà‡∏° ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ô‡πà‡∏ô</p>
        </div>

        <div class="row g-4 mb-5">
            <% products.forEach(p => { %>
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="product-card h-100 shadow-sm border-0 rounded-3">
                        <div class="product-img-wrapper" style="height: 200px; overflow: hidden;">
                            <img src="<%= p.image_url %>" alt="<%= p.name %>" class="w-100 h-100 object-fit-cover">
                        </div>
                        <div class="card-body text-center d-flex flex-column">
                            <h5 class="fw-bold mb-2" style="color: #006491;"><%= p.name %></h5>
                            <p class="text-muted small mb-3">‡∏≠‡∏£‡πà‡∏≠‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏Ñ‡∏≥ ‡∏ä‡∏µ‡∏™‡∏¢‡∏∑‡∏î‡∏™‡∏∞‡πÉ‡∏à</p>
                            <div class="price-tag fs-5 fw-bold text-danger mb-3"><%= p.price %> ‡∏ø</div>
                            
                            <form action="/add-to-cart" method="POST" class="mt-auto">
                                <input type="hidden" name="name" value="<%= p.name %>">
                                <input type="hidden" name="price" value="<%= p.price %>">
                                <input type="hidden" name="calories" value="<%= p.calories %>">
                                <input type="hidden" name="qty" value="1">
                                <button class="btn btn-outline-primary w-100 rounded-pill">
                                    <i class="bi bi-bag-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>

        <div class="text-center mb-4 pt-4 border-top">
            <h2 class="section-title">ü•§ ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°</h2>
            <p class="text-muted">‡∏≠‡∏¥‡πà‡∏°‡∏≠‡∏£‡πà‡∏≠‡∏¢‡∏Ñ‡∏π‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏° ‡πÉ‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏ö‡∏≤‡∏¢‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</p>
        </div>

        <div class="row g-4">
            <% if (locals.combos) { %>
                <% combos.forEach(c => { %>
                    <div class="col-lg-6">
                        <div class="card border-0 shadow-sm overflow-hidden h-100">
                            <div class="row g-0 h-100 align-items-center">
                                <div class="col-md-5 bg-light p-0" style="height: 240px; overflow: hidden;">
                                    <img src="<%= c.image_url %>" alt="<%= c.name %>" style="width: 100%; height: 100%; object-fit: cover; display: block;">
                                </div>
                                <div class="col-md-7">
                                    <div class="card-body">
                                        <h5 class="card-title fw-bold text-primary"><%= c.name %></h5>
                                        <p class="card-text text-muted small"><%= c.description %></p>
                                        
                                        <div class="d-flex align-items-center mb-3">
                                            <span class="text-decoration-line-through text-muted me-2 small">‡∏õ‡∏Å‡∏ï‡∏¥ <%= c.original_price %>‡∏ø</span>
                                            <span class="fs-4 fw-bold text-danger"><%= c.price %> ‡∏ø</span>
                                        </div>

                                        <form action="/add-to-cart" method="POST">
                                            <input type="hidden" name="name" value="<%= c.name %>">
                                            <input type="hidden" name="price" value="<%= c.price %>">
                                            <input type="hidden" name="calories" value="800"> 
                                            <input type="hidden" name="qty" value="1">
                                            
                                            <button class="btn btn-outline-primary w-100 rounded-pill">
                                                <i class="bi bi-bag-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }) %>
            <% } else { %>
                <div class="text-center text-muted col-12">
                    <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</p>
                </div>
            <% } %>
        </div>

        <div class="text-center mt-5 pt-4 border-top text-muted">
            <p class="small">¬© 2024 Pizza Shop Project. All rights reserved.</p>
            <span class="badge bg-light text-dark border">
                <i class="bi bi-eye"></i> ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ: <%= visitorCount %>
            </span>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>