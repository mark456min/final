<!DOCTYPE html>
<html>
<head>
    <%- include('partials/head') %>
    <title>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</title>
</head>
<body class="bg-light">
    <%- include('partials/navbar') %>

    <div class="container my-5">
        <h2 class="section-title mb-4">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>

        <% if(orders.length === 0) { %>
            <div class="alert alert-info text-center">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ <a href="/">‡πÑ‡∏õ‡∏™‡∏±‡πà‡∏á‡πÄ‡∏•‡∏¢!</a></div>
        <% } %>

        <% orders.forEach(order => { %>
            <div class="card shadow-sm mb-4 border-0">
                <div class="card-header bg-white d-flex justify-content-between align-items-center py-3">
                    <div>
                        <strong>Order #<%= order.id %></strong>
                        <span class="text-muted small ms-2"><%= new Date(order.order_date).toLocaleString('th-TH') %></span>
                    </div>
                    <div>
                        <% let badgeClass = 'bg-secondary';
                           if(order.status === 'Pending') badgeClass = 'bg-warning text-dark';
                           if(order.status === 'Baking') badgeClass = 'bg-primary';
                           if(order.status === 'Delivering') badgeClass = 'bg-info text-dark';
                           if(order.status === 'Completed') badgeClass = 'bg-success';
                           if(order.status === 'Cancelled') badgeClass = 'bg-danger';
                        %>
                        <span class="badge rounded-pill <%= badgeClass %> px-3 py-2"><%= order.status %></span>
                    </div>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush mb-3">
                        <% order.items.forEach(item => { %>
                            <li class="list-group-item d-flex justify-content-between">
                                <span><%= item.product_name %> (x<%= item.qty %>)</span>
                                <span><%= item.price * item.qty %> ‡∏ø</span>
                            </li>
                        <% }) %>
                    </ul>
                    <h5 class="text-end fw-bold text-primary">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <%= order.total_price %> ‡∏ø</h5>
                </div>
            </div>
        <% }) %>
    </div>
</body>
</html>